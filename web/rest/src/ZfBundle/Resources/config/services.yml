services:
  _defaults:
    autowire: true
    public: true

  zf.query_builder_factory:
    class: ZfBundle\Services\QueryBuilderFactory
    arguments:
      - "@doctrine.orm.entity_manager"

  ZfBundle\Services\DataGateway:
    arguments:
      $entityManager:
        "@doctrine.orm.entity_manager"
      $queryBuilderFactory:
        "@zf.query_builder_factory"
      $entityPersister:
        '@Ivoz\Core\Infrastructure\Domain\Service\DoctrineEntityPersister'
      $dtoAssembler:
        '@Ivoz\Core\Application\Service\Assembler\DtoAssembler'