<VirtualHost *:1443>
    ServerAdmin webmaster@localhost
    DocumentRoot /opt/irontec/ivozprovider/portals/public

    <Directory /opt/irontec/ivozprovider/portals/public>
        php_value include_path "/usr/share/php:/opt/irontec/ivozprovider/library:/opt/irontec/klear/library:/opt/irontec/ivozprovider/portals/library"
        Options -Indexes +FollowSymLinks -MultiViews
        AllowOverride All
         <Limit GET HEAD POST PUT DELETE OPTIONS PATCH>
            Order allow,deny
            allow from all
            Require all granted
        </Limit>
    </Directory>

    LogLevel warn
    CustomLog ${APACHE_LOG_DIR}/prov_access.log combined
    ErrorLog ${APACHE_LOG_DIR}/prov_error.log

    # Enable/Disable SSL for this virtual host.
    SSLEngine on
    SSLProtocol TLSv1
    SSLCipherSuite AES256-SHA:HIGH:MEDIUM:!aNULL:!MD5:!RC4
    SSLCertificateFile    /etc/ssl/certs/ssl-cert-snakeoil.pem
    SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory>

    <FilesMatch "\.(cgi|shtml|phtml|php)$">
        SSLOptions +StdEnvVars
    </FilesMatch>
    <Directory /usr/lib/cgi-bin>
        SSLOptions +StdEnvVars
    </Directory>

    SSLVerifyClient optional
    SSLVerifyDepth 3
    SSLCACertificateFile /etc/ssl/ca/Yealink_Equipment_Issuing_CA.crt
    SSLOptions +StdEnvVars +ExportCertData
    
</VirtualHost>

