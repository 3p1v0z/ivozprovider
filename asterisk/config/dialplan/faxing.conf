[shared-fax]
exten => _X.,1,Syslog(Receiving incoming Fax)
     same => n,AGI(agi://127.0.0.1:4573/cli.php?model=default/faxes/faxin)
     same => n,ReceiveFAX(${FAXFILE},f)

exten => h,1,Syslog(Post-processing received Fax)
     same => n,AGI(agi://127.0.0.1:4573/cli.php?model=default/faxes/processfaxinstatus)

[shared-faxout-dial]
exten => _X.,1,Syslog(Procesing outgoing Fax)
    same => n,AGI(agi://127.0.0.1:4573/cli.php?model=default/faxes/faxout)
    same => n,Dial(PJSIP/${EXTEN}@proxytrunks,,b(addheaders^s^1(${DIAL_OPTIONS})))

[shared-faxout]
exten => _X.,1,Syslog(Sending file from Fax)
    same => n,AGI(agi://127.0.0.1:4573/cli.php?model=default/faxes/faxoutsend)
    same => n,SendFax(${FAXFILE},f)

exten => h,1,Syslog(Post-processing sent Fax)
    same => n,AGI(agi://127.0.0.1:4573/cli.php?model=default/faxes/processfaxoutstatus)

